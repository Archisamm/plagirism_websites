{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Researcher Results</title>
  <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
  <link rel="stylesheet" href="{% static 'css/pages.css' %}">
</head>
<body>

<nav id="navbar"></nav>

<div class="page-container">
  <h1 class="page-title">✅ Results</h1>
  <p class="page-desc">Your latest plagiarism analysis results.</p>

  <div id="resList" class="card-box">Loading...</div>
</div>

<script src="{% static 'js/navbar.js' %}"></script>
<script>
async function loadResults(){
  const box = document.getElementById("resList");
  try{
    const res = await fetch("/api/recent-results/");
    const data = await res.json();

    if(!data.results || !data.results.length){
      box.innerHTML = "<p>No results yet.</p>";
      return;
    }

    box.innerHTML = data.results.map(r => `
      <div class="result-card">
        <h3>${r.title}</h3>
        <p><b>${r.plagiarism_percentage}%</b> — ${r.verdict}</p>
        <small>${r.created_at}</small>
      </div>
    `).join("");

  }catch(e){
    box.innerHTML = "<p>Error loading results</p>";
  }
}
loadResults();
</script>
</body>
</html>
